
# Diretório de trabalho

  O diretorio  de trabalho ? aquele usado pelo R para gravar, ler, importar e exportar arquivos quando nenhum outro caminho ? explicitado.

### Onde os dados devem estar? 
 
Para saber onde os diretorios est?o para digitar o comando **getwd()**
```{r}
 getwd() #para verificar  diret?rio de trabalho
```
Caso queira alterar o diretorio de trabalho para um outro qualquer digite o comando **setwd()**

```{r eval=FALSE, include=FALSE}
setwd("C:/R_Curso") #para  altear o diret?rio de trabalho
```
 
 Outra forma de mudar o caminho ? com o comando:
```{r eval=FALSE, include=FALSE}
caminho<-file.choose() # >shit< >Crtl< >H<
```
 
Este comando ir? abrir uma tela para que o usu?rio navegue nas pastas e escolha o arquivo a ser aberto. 
 
Voc? pode exibir o conteudo do diret?rio com o comando **dir()**
```{r}
dir()
```

 
### Entrando com dados

O formato mais adequado vai depender do tamanho do conjunto de dados, e se os dados j? existem em outro formato para serem importados ou se ser?o digitados diretamente no R.

A seguir s?o descritas 4 formas de entrada de dados com indica??o de quando cada uma das formas deve ser usada. 

#### Vetores

Podemos entrar com dados definindo vetores com o comando **c()**.

```{r}
vetor <- c(2,5,7)
```

Esta forma de entrada de dados ? conveniente quando se tem um pequeno n?mero de dados. Quando os dados tem algum elementos repetidos, n?meros sequenciais pode-se usar mecanismos do R para facilitar a entrada dos dados como vetores.

```{r}
vetor <- rep(c(2,5), 5)  # cria vetor repetindo 5 vezes 2 e 5 alternadamente
vetor

vetor <- rep(c(5,8), each=3)  # cria vetor repetindo 3 vezes 5 e depois 8
vetor
```

#### Usando a função scan

Est? fun??o coloca o Rem modo prompt onde o usu?rio deve digitar cada dado seguido da tecla <ENTER>. Para encerrar a entrada de dados basta digitar <ENTER> duas vezes consecutivas. Veja o seguinte resultado:

```{r}
y <- scan()

#1: 11
#2: 24
#3: 35
#4: 29
#5: 39
#6: 47
#7:
#Read 6 items

y
#[1] 11 24 35 29 39 47
```

Este formato ? mais ?gil que o anterior e ? conveniente para digitar vetores longos.

#### Copiar e colar usando scan()
Pode usar o recurso "copiar e colar" com o comando **scan**.
Ap?s copiar os dados (crtl+C), digite no **prompt**/**console** o comando scan(), aperte >ENTER<, depois cole o texto e, aperte >ENTER< novamente.s

#### Lendo dados através da área de transferência
Fun??es como scan(), read.table() e outras podem usades para ler os dados diretamente da ?rea de transfer?ncia passando-se a op??o *"clipboard"* ao primeiro argumento.

dados <- read.table("clipboard", header=TRUE, dec=",")

#### 9.3 Usando a função edit

O comando edit**(data.frame())** abre uma planilha para digita??o de dados que s?o armazanados como data-frames. 

```{r}
dados <- edit(data.frame())

```

Se voce precisar abrir novamente planilha com os dados, para fazer corre??es e/ou inserir mais dados use o comando **fix**. 

```{r}

fix(dados)
head(dados)
```

##### Exemplo 1
```{r}
teste <- c(10,20,30,40,50)
teste
```
Por?m houve um erro: o ?ltimo elemento deveria ser 60 e n?o 50, voc? n?o precisar criar novamente um objeto, use o comando **edit()**

```{r}
teste2 <- edit(teste)
```

#### Exemplo 2

Com uma planilha com  tr?s colunas de dados. Os valores num?ricos da coluna poderiam ser importados para o R utilizando-se o mesmo processo ora descrito com o uso do comando scan(). Abra o arquivo _EVI-prec.xlsx_.

```{r eval=FALSE, include=FALSE}
ano <- scan()
chuva <- scan()
evi <- scan ()
```

Uma matrix com os dados poder? ser obtida com o comando **cbind**

```{r eval=FALSE, include=FALSE}
dados <- cbind(ano, chuva, evi)
```

Os objeto dados ? um **data.frame**
```{r eval=FALSE, include=FALSE}
is.data.frame(dados)
```

Transforme para um data.frame com o comando **as.data.frame**
```{r eval=FALSE, include=FALSE}
dados_m <- as.data.frame(dados)
```

Poderia usar o comando data.frame direto
```{r eval=FALSE, include=FALSE}
dados=data.frame (ano, chuva, evi)
```


### Lendo dados de um arquivo texto
 
 ? muito importante ter os dados tabulados em um arquivo-texto ou em outros formatos que permitem a convers?o para dados texto. O comando **read.table ()** ? extremamente ?til por ler dados de um arquivo-texto no formato de um **data.frame**
 

### Usando o Comando *read.table ()*

**Exemplo 1**: Como primeiro exemplo considere importar para o R os dados do arquivo texto *exemplo1*. Na pasta compartilhada *3-DADOS_ROTINAS* copie o arquivo para sua ?rea de trabalho (C:/R).

```{r eval=FALSE, include=FALSE}
ex01 <- read.table("exemplo1.txt") 
  
  ex01
  class(ex01)
  names(ex01)
  dim(ex01)
  str(ex01)
  head(ex01)
 
```

**Exemplo 2**: Como primeiro exemplo considere importar para o R os dados  do arquivo de texto *exemplo2*. 

ex02 <- read.table("exemplo2.txt") 
ex02


Note que este arquivo difere do anterior em um aspecto: os nomes das vari?veis est?o na primeira linha. Para que o R considere isto corretamente temos que inform?-lo disto com o argumento head=T. Portanto para importar este arquivo usamos:


ex02 <- read.table("exemplo02.txt", head=T) 
ex02

###Dados do tipo CSV

**Exemplo 3**: Vamos utilizar um arquivo de tipo **CSV**.

ex03 <- read.table("exemplo3.csv.", head=T, sep=":", dec=",") 
ex03

Note que este arquivo difere do primeiro em outros aspectos.
*?read.table.*

ex03 <- read.table(       # l? dados de um arquivo texto
  "exemplo3.csv",         # nome do arquivo ou o caminho c:/R.exemplo3.csv
  head=T,                 # primeira linha ? cabe?alho
  sep=":",                # separador de coluna 
  dec=",")                # virgula como separador
ex03                      # exibe o objeto

**sep**: caractere utilizado para separa??o dos campos e valores. Normalmente ? utilizado o ponto e v?rgula (;)
**dec**: caractere utilizado para separar as casas decimais. Normalmente ponto (.) ou v?rgula (,).
**header**: TRUE, assume que a primeira linha da tabela cont?m r?tulos das vari?veis. FALSE, assume que os dados se iniciam na primeira linha.

###A seguir listamos algumas  destas fun??es:

*read.dbf()* para arquivos DBASE
*read.epiinfo()* para arquivos .REC do Epi-Info
*read.mtp()* para arquivos "Minitab Portable Worksheet"
*read.S()* para arquivos do S-PLUS, e restore.data() para "dumps" do S-PLUS
*read.spss()* para dados do SPSS
*read.systat()* para dados do SYSTAT
*read.dta()* para dados do STATA
*read.octave()* para dados do OCTAVE (um clone do MATLAB)

*read.csv*(file, header = TRUE, sep=",", dec=".")
*read.csv2*(file, header = TRUE, sep=";", dec=",")
*read.delim*(file, header = TRUE, sep="\t", dec=".")
*read.delim2*(file, header = TRUE, sep="\t", dec=",")

###Lendo dados dispon?veis na web

**Exemplo 4**: As fun??es permitem ler ainda dados diretamente dispon?veis na web. Por exemplo os dados do Exemplo 1 poderiam ser lidos diretamente com o comando a seguir

```{r eval=FALSE, include=FALSE}
dados <- read.table("https://www.dropbox.com/s/l8vfauvy2nzhudl/exemplo1.txt?dl=1")
```

###Lendo dados de uma planilha eletr?nica

Com o **pacote xlsx** ? possivel ler os dados diretamente da planilha eletr?nica do Excel.


install.packages("")
require("xlsx")


O comando *read.xlsx()*, do **pacote xlsx**, l? o conte?do de uma planilha eletronica para o R com a estrutura de dados de um *data.frame*.

dados <- read.xlsx(
                    file="C:/R/EVI_Prec2.xlsx",    #comando que l? planilhas
                    sheetName = "Conbea",          #nome da planilha
                    h=T)                           #sem cabelho  
      
###Exerc?cios

1 Baixe os seguintes arquivos:
DBC_2rep_mamoeiro_alt_93.txt
DIC_REG_feijao_peso_169.txt
DIC_DB_pinus_alt

Coloque os arquivos em um local apropriado (de prefer?ncia no mesmo diret?rio de trabalho que voce definiu no in?cio da sess?o), fa?a a importa??o usando a fun??o  de sua escolha, e confira a estrutura dos dados com str().

#10 Salvar objetos de dados

Salvar objetos de dados nos formatos **.txt** ou **.csv**
fun??o: **write.table**
sintaxe da fun??o:
  *write.table*(x, file, sep="", dec="", rownames = T, col.names = T)
  
principais argumentos:
x - matriz ou data frame
file - nome do arquivo ou caminho do arquivo
sep - separador da coluna
dec - separador deciminal

##Outras fun??es

write.csv()
write.csv2()
write.xlsx ()

**Exemplo:**
write.xlsx(dados,"tabela salva.xlsx")

